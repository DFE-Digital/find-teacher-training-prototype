<div class="govuk-toggle" data-module="toggle">
  <button class="govuk-toggle__link js-toggle" aria-expanded="false" aria-controls="searchFilters">
    Filter the results
  </button>

  <div class="govuk-toggle__target" id="searchFilters" data-qa="filters">
    {% if provider %}
      <div class="filter-form">
        <h4 class="govuk-heading-s filter-form__title">Provider name</h4>
        <ul class="filter-form__value--list">
          <li>{{ provider.name }}</li>
        </ul>
        <a class="govuk-link" href="/">Change provider or choose a location</a>
      </div>
    {% else %}
      <div class="filter-form">
        <h4 class="govuk-heading-s filter-form__title">Location</h4>
        <ul class="filter-form__value--list">
          <li>
            <p class="govuk-body govuk-!-margin-bottom-2">{{ location or area.name }}</p>
            <img src="https://maps.googleapis.com/maps/api/staticmap?key={{ googleMapsApiKey }}&amp;center={{ latLong }}&amp;zoom=10&amp;size=300x200&amp;scale=2&amp;markers={{ latLong }}" alt="Map showing {{ radius }} miles of {{ locationName }}" class="filter-form__map">
          </li>
        </ul>
        <a class="govuk-link" href="/results/filters/location">Change location</a>
      </div>
    {% endif %}

    <div class="filter-form">
      <h4 class="govuk-heading-s filter-form__title">Subjects</h4>
      <ul class="filter-form__value--list">
        {% if send %}
          <li>Only SEND courses</li>
        {% endif %}
        {% set remainingSubjects = selectedSubjects.length - 4 %}
        {% for subject in selectedSubjects | limitTo(4) %}
          <li>{{ subject.text }}</li>
        {% endfor %}
        {% if remainingSubjects > 0 %}
          <li>and {{ remainingSubjects }} moreâ€¦</li>
        {% endif %}
      </ul>
      <a class="govuk-link" href="/results/filters/subject">Change subjects</a>
    </div>

    <div class="filter-form">
      <h4 class="govuk-heading-s filter-form__title">Study type</h4>
      <ul class="filter-form__value--list">
        {% for option in data.studyTypeOptions %}
          {% if studyType.includes(option.value) %}
            <li>{{ option.text }}</li>
          {% endif %}
        {% endfor %}
      </ul>
      <a class="govuk-link" href="/results/filters/study-type">Change study type</a>
    </div>

    <div class="filter-form">
      <h4 class="govuk-heading-s filter-form__title">Qualifications</h4>
      <ul class="filter-form__value--list">
        {% if qualification.length == 3 %}
          <li>All qualifications</li>
        {% else %}
          {% for option in data.qualificationOptions %}
            {% if qualification.includes(option.value) %}
              <li>{{ option.text }}</li>
            {% endif %}
          {% endfor %}
        {% endif %}
      </ul>
      <a class="govuk-link" href="/results/filters/qualification">Change qualifications</a>
    </div>

    <div class="filter-form">
      <h4 class="govuk-heading-s filter-form__title">Salary</h4>
      <ul class="filter-form__value--list">
        {% for option in data.salaryOptions %}
          {% if salary == option.value %}
            <li>{{ option.text }}</li>
          {% endif %}
        {% endfor %}
      </ul>
      <a class="govuk-link" href="/results/filters/salary">Change salary option</a>
    </div>

    <div class="filter-form">
      <h4 class="govuk-heading-s filter-form__title">Vacancies</h4>
      <ul class="filter-form__value--list">
        {% for option in data.vacancyOptions %}
          {% if vacancy == option.value %}
            <li>{{ option.text }}</li>
          {% endif %}
        {% endfor %}
      </ul>
      <a class="govuk-link" href="/results/filters/vacancy">Change vacancies</a>
    </div>
  </div>
</div>
