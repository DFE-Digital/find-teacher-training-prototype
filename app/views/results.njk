{% extends "_layouts/default.njk" %}

{% set title = resultsCount + " courses found" %}

{% block content %}

<div class="govuk-body">
  <b>{{ selectedSubjects | join("</b> and <b>", "text") }}</b> courses in <b>{% if area %}{{ londonBoroughItems | join("</b>, <b>", "text") if londonBorough else area.name }}{% else %}England{% endif %}</b>
  <a href="/" class="govuk-link govuk-!-margin-left-4">Change</a>
</div>

  <h1 class="govuk-heading-l">
    {% if results | length > 0 %}
      {{ resultsCount }} courses found
    {% else %}
      No courses found
    {% endif %}
  </h1>

  <div class="app-filter-toggle"></div>

  <div class="app-filter-layout">
    <div class="app-filter-layout__filter">
      {% include "_includes/filter.njk" %}
    </div>

    <div class="app-filter-layout__content">
      {% if results | length > 0 %}
        <ul class="app-search-results">
        {% for result in results %}
          <li class="app-search-results__item">
            {{ appResultDetail({
              href: "/course/" + result.provider.code + "/" + result.course.code,
              providerName: result.provider.name | markdown("inline"),
              courseName: result.course.name + " (" + result.course.code + ")",
              placementAreas: result.placementAreas | formatList,
              schools: result.schools,
              accreditedBody: result.course.accredited_body,
              studyMode: result.course.study_mode,
              qualification: result.course.qualification,
              funding: "Salary" if result.course.funding_type == "salary" else "Student finance if youâ€™re eligible",
              degree: "2:1 degree or higher (or equivalent)",
              visa: "Student visas can be sponsored",
              vacancies: ("Yes" if result.course.has_vacancies else "No") if not vacancy
            }) }}
          </li>
        {% endfor %}
        </ul>
        {{ appPagination(pagination) }}
      {% else %}
        <div class="app-search-results">
        {% if area.country_name != "England" %}
          <h2 class="govuk-heading-m">This service is for courses in England</h2>
          {% if area.country_name == "Scotland" %}
            <p class="govuk-body"><a class="govuk-link" href="https://teachinscotland.scot/">Learn more about teacher training in Scotland</a></p>
          {% elif area.country_name == "Wales" %}
            <p class="govuk-body"><a class="govuk-link" href="https://www.discoverteaching.wales/routes-into-teaching/">Learn more about teacher training in Wales</a></p>
          {% elif area.country_name == "Northern Ireland" %}
            <p class="govuk-body"><a class="govuk-link" href="https://www.education-ni.gov.uk/articles/initial-teacher-education-courses-northern-ireland">Learn more about teacher training in Northern Ireland</a></p>
          {% endif %}
        {% else %}
          <p class="govuk-body">You can <a class="govuk-link" href="/">try another search</a>, for example by changing subject or location.</p>
        {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
